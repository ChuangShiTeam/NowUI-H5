"use strict";function $(a,b){return(b||document).querySelectorAll(a)}function css(c,b){for(var a in b){c.style[a]=b[a]}}function css(c,b){for(var a in b){c.style[a.toString()]=b[a]}}function hasClass(b,a){return b.classList?b.classList.contains(a):new RegExp("\\b"+a+"\\b").test(b.className)}function addClass(b,a){if(b.classList){b.classList.add(a)}else{if(!hasClass(b,a)){b.className+=" "+a}}}function removeClass(b,a){if(b.classList){b.classList.remove(a)}else{b.className=b.className.replace(new RegExp("\\b"+a+"\\b","g"),"")}}function addEvent(c,b,a){if(c.attachEvent){c.attachEvent("on"+b,a)}else{c.addEventListener(b,a)}}function animateLeft(b,f,e){var a=b.style,c=(f||200)/20;a.left=a.left||"0px";(function d(){a.left=(parseInt(a.left,10)-c)>0?(parseInt(a.left,10)-c)+"px":0;parseInt(a.left,10)>0?setTimeout(d,10):a.left=0})()}function animateOpacity(c,f,a){var b=c.style,d=25/(f||200);b.opacity=b.opacity||0;(function e(){(b.opacity=parseFloat(b.opacity)+d)>1?b.opacity=1:setTimeout(e,25)})()}function SliderUnlock(g,c,f,e){var a=this;var b=a.checkElm(g)?$(g)[0]:document;var c=a.checkObj(c)?c:new Object();var f=a.checkFn(f)?f:function(){};var e=a.checkFn(e)?e:function(){};var d={labelTip:typeof(c.labelTip)!=="undefined"?c.labelTip:"Slide to Unlock",successLabelTip:typeof(c.successLabelTip)!=="undefined"?c.successLabelTip:"Success",duration:typeof(c.duration)!=="undefined"||!isNaN(c.duration)?c.duration:200,swipestart:typeof(c.swipestart)!=="undefined"?c.swipestart:false,min:typeof(c.min)!=="undefined"||!isNaN(c.min)?c.min:0,max:typeof(c.max)!=="undefined"||!isNaN(c.max)?c.max:b.clientWidth-$(".slideunlock-label")[0].clientWidth,index:typeof(c.index)!=="undefined"||!isNaN(c.index)?c.index:0,IsOk:typeof(c.isOk)!=="undefined"?c.isOk:false,lableIndex:typeof(c.lableIndex)!=="undefined"||!isNaN(c.lableIndex)?c.lableIndex:0};a.elm=b;a.opts=d;a.swipestart=d.swipestart;a.min=d.min;a.max=d.max;a.index=d.index;a.isOk=d.isOk;a.lableIndex=d.lableIndex;a.success=f;a.always=e}SliderUnlock.prototype.checkElm=function(a){if($(a).length>0){return true}else{throw"this element does not exist."}};SliderUnlock.prototype.checkObj=function(a){if(typeof a==="object"){return true}else{throw"the params is not a object."}};SliderUnlock.prototype.checkFn=function(a){if(typeof a==="function"){return true}else{throw"the param is not a function."}};SliderUnlock.prototype.init=function(){var a=this,b=$(".slideunlock-label")[0];a.updateView();addEvent(b,"mousedown",function(c){var d=c||window.event;a.lableIndex=d.clientX-this.offsetLeft;a.handerIn()});addEvent(b,"mousemove",function(c){a.handerMove(c)});addEvent(b,"mouseup",function(c){a.handerOut()});addEvent(b,"mouseout",function(c){a.handerOut()});addEvent(b,"touchstart",function(c){var d=c||window.event;console.log(d);a.lableIndex=d.touches[0].pageX-this.offsetLeft;a.handerIn()});addEvent(b,"touchmove",function(c){a.handerMove(c,"mobile")});addEvent(b,"touchend",function(c){a.handerOut()})};SliderUnlock.prototype.handerIn=function(){var a=this;a.swipestart=true;a.min=0;a.max=a.elm.clientWidth-$(".slideunlock-label")[0].clientWidth};SliderUnlock.prototype.handerOut=function(){var a=this;a.swipestart=false;if(a.index<a.max){a.reset()}};SliderUnlock.prototype.handerMove=function(c,b){var a=this;if(a.swipestart){c.preventDefault();var c=c||window.event;if(b=="mobile"){a.index=c.touches[0].pageX-a.lableIndex}else{a.index=c.clientX-a.lableIndex}a.move()}};SliderUnlock.prototype.move=function(){var a=this;if((a.index+0)>=a.max){a.index=a.max-0;a.swipestart=false;a.isOk=true}if(a.index<0){a.index=a.min;a.isOk=false}if(a.index==a.max&&a.max>0&&a.isOk){a.success()}a.backgroundTranslate();a.updateView()};SliderUnlock.prototype.reset=function(){var a=this;animateLeft($(".slideunlock-label")[0],a.opts.duration,a.index);animateOpacity($(".slideunlock-lable-tip")[0],a.opts.duration,1);a.index=0;a.updateView()};SliderUnlock.prototype.backgroundTranslate=function(){var a=this;$(".slideunlock-label")[0].style.left=a.index+"px";$(".slideunlock-lable-tip")[0].style.opacity=1-(parseInt($(".slideunlock-label")[0].style.left)/a.max)};SliderUnlock.prototype.updateView=function(){var a=this,c=$(".slideunlock-lable-tip")[0];if(a.index==(a.max-0)){$(".slideunlock-lockable")[0].value=1;var b={filter:"alpha(opacity=1)","-moz-opacity":"1",opacity:"1"};addClass(a.elm,"success");c.innerHTML=a.opts.successLabelTip;css(c,b)}else{$(".slideunlock-lockable")[0].value=0;removeClass(a.elm,"success");c.innerHTML=a.opts.labelTip}a.always()};